<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLEX 영상 소개</title>
    <style>
        * {
            margin: 0px;
            padding: 0px;
            box-sizing: border-box;
        }

        ul {
            list-style: none;
        }

        a {
            text-decoration: none;
        }

        main {
            width: 100%;
            height: 100vh;
            background: #333;
            display: flex;
            /*header와 section을 좌우배치하기 위해 flex 설정*/
        }

        header {
            width: 20%;
            height: 100%;
            /* padding: 10vh 5vw; */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-start;
            padding: 150px 50px;
        }

        header h1,
        header p {
            color: #fff;
        }

        header h1 {
            font-size: px;
        }

        main section {
            height: 100%;
            display: flex;
            padding: 150px;
        }

        main section article {
            flex: 1;
            padding: 70px 40px 100px;
            position: relative;
            opacity: 0.6;
            z-index: 1;
            transition: 1s;
            cursor: pointer;
        }

        main section article::before {
            content: "";
            display: block;
            width: 80%;
            height: 100%;
            position: absolute;
            background: #444;
            top: 0px;
            left: -200px;
            /*마우스 호버 전 article의 왼쪽 바깥쪽에 배치*/
            opacity: 0;
            /*마우스 호버 전 투명하게 숨김 처리*/
            transition: 1s;
        }

        main section article .inner {
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
            align-content: space-between;
            /*.txt와 figure 요소를 위 아래 끝에 배치*/
            position: relative;
            /*::bofore 요소 위쪽으로 배치되게 하기 위해 position 처리 */
        }

        main section article h2 {
            color: #fff;
            margin-bottom: 40px;
            padding-top: 70px;
            transition: 1s;
            /*호버시 전환효과 처리 */
        }

        main section h2::after {
            /*h2요소 하단 꾸밈 효과*/
            content: "";
            display: block;
            width: 40px;
            height: 2px;
            background: #777;
            margin-top: 20px;
            transition: 1.5s;
        }

        main section p {
            color: #999;
        }

        main section figure {
            width: 100%;
            box-shadow: 5px 5px 30px rgba(0, 0, 0, 0.3);
            filter: saturate(10%);
            /*영상박스의 채도를 낮춤*/
            transition: 1s;
            height: 100px;
        }

        main section video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /*영상이 figure 영역안에 꽉 차도록 설정*/
            /*영상 가장자리의 여백을 숨기기위해 약간 확대*/
        }

        main section article:hover {
            /*article 요소에 호버시 변경 구문*/
            flex: 1.5;
            /*호버 된 요소만 1.5배 너비를 증가*/
            opacity: 1;
        }

        main section article:hover::before {
            /*article 요소에 호버시 ::before 변경 구문*/
            left: 0px;
            /* -200 보내놓은 걸 제자리로 옮김 */
            opacity: 1;
        }

        main section article:hover .inner .txt {
            width: 75%;
            /* 텍스트가 차지하는 width가 작아보이게 */
        }

        main section article:hover .inner .txt h2 {
            font-size: 56px;
            padding-top: 0px;
        }

        main section article:hover .inner .txt h2::after {
            width: 120px;
            background: orange;
        }

        main section article:hover .inner figure {
            height: 250px;
            filter: saturate(200%);
            transform: translateY(50px);
        }

        main aside {
            width: 100%;
            height: 100vh;
            background: #222;
            position: absolute;
            top: 0px;
            left: -100%;
            /*왼쪽 화면 바깥에 배치*/
            opacity: 0;
            /*투명도 0으로 비활성화*/
            z-index: 2;
            /*2로 설정하며 section은 덮고 h1과 nav는 aside 위쪽에 배치*/
            padding: 200px;
            display: flex;
            justify-content: space-between;
            /*자식 요소인 .txt와 figure를 좌우 양 끝에 배치 */
            transition: 1s;
            /*전환효과 설정*/
        }

        main aside.on {
            /*클래스 on이 붙으면*/
            opacity: 1;
            left: 0%;
            /*왼쪽 바깥에서 화면 안쪽으로 이동하도록 설정*/
        }

        main aside .txt {
            width: 25%;
            height: 100%;
        }

        main aside .txt h1 {
            color: #ddd;
            font-size: 56px;
            margin-bottom: 20px;
        }

        main aside .txt p {
            color: #666;
            margin-bottom: 60px;
        }

        main aside .txt span {
            cursor: pointer;
            color: orange;
        }

        main aside figure {
            width: 75%;
            height: 100%;
        }

        main aside figure video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>

<body>
    <main>
        <header>
            <h1>
                회사소개
            </h1>

            <p>
                2021 DCODELAB<br>ALL RIGHT RESERVED.
            </p>
        </header>

        <section>
            <article class="content">
                <div class="inner">
                    <div class="txt">
                        <h2>01</h2>
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>
                    </div>
                    <figure>
                        <video src="./vid1.mp4" muted loop></video>
                    </figure>
                </div>
            </article>

            <article class="content">
                <div class="inner">
                    <div class="txt">
                        <h2>02</h2>
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>
                    </div>
                    <figure>
                        <video src="./vid2.mp4" muted loop></video>
                    </figure>
                </div>
            </article>

            <article class="content">
                <div class="inner">
                    <div class="txt">
                        <h2>03</h2>
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>
                    </div>
                    <figure>
                        <video src="./vid3.mp4" muted loop></video>
                    </figure>
                </div>
            </article>

            <article class="content">
                <div class="inner">
                    <div class="txt">
                        <h2>04</h2>
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>
                    </div>
                    <figure>
                        <video src="./vid4.mp4" muted loop></video>
                    </figure>
                </div>
            </article>
        </section>

        <aside class="hidden_content">
            <div class="txt">
                <h1 class="change_title">01</h1>
                <p class="change_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                <span class="close_txt">CLOSE</span>
            </div>
            <figure>
                <video class="hidden_video" src="./vid1.mp4" loop muted></video>
            </figure>
        </aside>
    </main>
    <script>
        // 모든 article(.content) 요소 선택
        const items = document.querySelectorAll(".content");
        const leftSlide = document.querySelector(".hidden_content");
        const close = leftSlide.querySelector(".close_txt");

        // 일반 for문 사용
        for (let i = 0; i < items.length; i++) {
            const el = items[i];

            // 마우스 올렸을 때 비디오 재생
            el.addEventListener("mouseenter", function (e) {
                e.currentTarget.querySelector("video").play();
                // 해당 요소 안에 마우스가 들어왔다고 감지되었을 때 이벤트가 발생한다.
                //e.currentTarget : 현재 이벤트가 발생한 여러개의 article중 하나
                // 이벤트가 발생한 article안에 있는 vidio를 찾아 플레이함 
            });

            // 마우스 나갔을 때 비디오 정지
            el.addEventListener("mouseleave", function (e) {
                e.currentTarget.querySelector("video").pause();
                // 퍼스속성
                // 이벤트가 발생한 article에서 마우스가 벗어나면 vidio를 정지함
            });

            // 클릭 시 leftSlide(팝업) 활성화
            el.addEventListener("click", function (e) {
                // 클릭한 요소의 정보 가져오기
                const tit = e.currentTarget.querySelector("h2").innerText;
                // 클릭한 article의 h2태그 안에 있는 text를 title안에 넣음
                const txt = e.currentTarget.querySelector("p").innerText;
                // p태그도 똑같이 진행
                const vidSrc = e.currentTarget.querySelector("video").getAttribute("src");
                // vidio도 달라져야 하기 때문에video의 src속성값을 vidSrc에 넣어준다.

                // leftSlide에 내용 적용
                leftSlide.querySelector(".change_title").innerText = tit;
                leftSlide.querySelector(".change_text").innerText = txt;
                leftSlide.querySelector(".hidden_video").setAttribute("src", vidSrc);

                // leftSlide 활성화 및 비디오 재생
                leftSlide.classList.add("on");
                leftSlide.querySelector(".hidden_video").play();
            });
            close.addEventListener("click", function () {
                leftSlide.classList.remove("on");
                leftSlide.querySelector(".hidden_video").pause();
            });
        }

        // 닫기 버튼 클릭 (for문 밖!)
    </script>
</body>

</html>